<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Projects</title>
  <style>
    :root { --bg:#fafafa; --card:#fff; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --shadow:0 6px 18px rgba(0,0,0,.06) }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans";
      background:linear-gradient(#f6f7fb,var(--bg));color:var(--text)}
    .container{max-width:1200px;margin:0 auto;padding:24px 14px 40px}
    h1{margin:0 0 8px;font-size:32px}
    .lead{margin:0 0 16px;color:var(--muted)}

    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
    .card-head{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;cursor:pointer}
    .title{font-weight:700;font-size:18px}
    .pill{font-size:12px;padding:4px 10px;border:1px solid var(--border);color:#374151;background:#f9fafb;border-radius:999px}
    .details{display:none}
    .details.open{display:block}

    /* Slideshow frame that fits the screen */
    .frame{
      width:100%;
      height:calc(100vh - 220px); /* fills the screen minus header/padding */
      min-height:300px;
      background:#fff;
      border-top:1px solid var(--border);
      display:flex;align-items:center;justify-content:center;
    }
    .frame img{
      width:100%; height:100%;
      object-fit:contain;          /* FIT to screen, no cropping */
      background:#fff;
    }
    .empty{color:var(--muted);font-size:14px;text-align:center}
  </style>
</head>
<body>
  <div class="container">
    <h1>My Projects</h1>
    <p class="lead">Tap a project name to see its website and full-screen-fit slideshow.</p>
    <div id="list"></div>
  </div>

  <!-- Your projects -->
  <script>
    window.PROJECTS = [
      {
        id: "ecart",
        title: "E-cart (Electronics Store)",
        websiteUrl: "https://your-ecart-site.example.com",
        images: [
          "https://drive.google.com/file/d/1-Q8Br9gIMLLR585axlYUyy6gcHEfv5Wu/view?usp=sharing",
          "https://drive.google.com/file/d/12xMxcjxDm46aJcN1CUwkHnrvyOrtEgHD/view?usp=sharing",
          "https://drive.google.com/file/d/1NT-OxEnAq18gFC_2xUcJvzYLUp6ti7WZ/view?usp=sharing",
          "https://drive.google.com/file/d/14NAa_7IVgwKAywYznLm5pHZ5dnbT-bg9/view?usp=sharing"
        ]
      },
      { id:"note-gen", title:"AI Note Generator (Streamlit + Whisper)", websiteUrl:"", images:[] },
      { id:"yt-transcriber", title:"YouTube Transcriber (Faster Whisper)", websiteUrl:"", images:[] }
    ];
  </script>

  <!-- App (no buttons; auto-play; Drive-friendly) -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var PROJECTS = window.PROJECTS || [];
      var listEl = document.getElementById('list');

      // --- Google Drive helpers ---
      function extractDriveId(url){
        if(!url) return null;
        var m1 = url.match(/[?&]id=([^&]+)/);
        if(m1) return m1[1];
        var m2 = url.match(/\/file\/d\/([^/]+)\//);
        if(m2) return m2[1];
        return null;
      }
      function driveViewUrl(id){ return "https://drive.google.com/uc?export=view&id=" + id; }
      function driveThumbUrl(id){ return "https://drive.google.com/thumbnail?id=" + id + "&sz=w1600"; }

      function normalizeSources(raw){
        var id = extractDriveId(raw);
        return id ? [driveViewUrl(id), driveThumbUrl(id)] : [raw];
      }
      function makeImgWithFallback(srcList, altText){
        var img = document.createElement('img');
        img.alt = altText || ""; img.loading = "lazy"; img.referrerPolicy = "no-referrer";
        var i = 0; function tryNext(){ if(i >= srcList.length){ img.removeAttribute('src'); return; } img.src = srcList[i++]; }
        img.onerror = tryNext; tryNext(); return img;
      }

      function createProjectCard(project, openByDefault){
        var card = document.createElement('div'); card.className = 'card';
        var head = document.createElement('div'); head.className = 'card-head';
        head.setAttribute('role','button'); head.setAttribute('tabindex','0'); head.setAttribute('aria-expanded','false');

        var title = document.createElement('div'); title.className = 'title'; title.textContent = project.title;
        var pill = document.createElement('span'); pill.className = 'pill'; pill.textContent = 'tap to view';
        head.appendChild(title); head.appendChild(pill);

        var details = document.createElement('div'); details.className = 'details';
        var frame = document.createElement('div'); frame.className = 'frame';
        details.appendChild(frame);

        var index = 0, timer = null, AUTOPLAY_MS = 3000;

        function renderImage(){
          frame.innerHTML = '';
          if(!project.images || !project.images.length){
            var empty = document.createElement('div'); empty.className = 'empty';
            empty.textContent = 'No images yet.'; frame.appendChild(empty); return;
          }
          var sources = normalizeSources(project.images[index]);
          frame.appendChild(makeImgWithFallback(sources, project.title + ' image ' + (index+1)));
        }
        function startAutoplay(){
          if(timer || !project.images || project.images.length < 2) return;
          timer = setInterval(function(){
            index = (index + 1) % project.images.length;
            renderImage();
          }, AUTOPLAY_MS);
        }
        function stopAutoplay(){ if(timer){ clearInterval(timer); timer = null; } }

        function toggle(){
          var open = details.classList.contains('open');
          if(open){ details.classList.remove('open'); head.setAttribute('aria-expanded','false'); pill.textContent='tap to view'; stopAutoplay(); }
          else    { details.classList.add('open'); head.setAttribute('aria-expanded','true'); pill.textContent='tap to hide'; index=0; renderImage(); startAutoplay(); }
        }
        head.addEventListener('click', toggle);
        head.addEventListener('keydown', function(e){ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); toggle(); } });

        card.appendChild(head); card.appendChild(details);

        // Open first project by default
        if(openByDefault){ toggle(); }
        return card;
      }

      // Render all projects; open the first (E-cart) by default
      PROJECTS.forEach(function(p, i){ listEl.appendChild(createProjectCard(p, i === 0)); });

      // Resize handler keeps the frame height responsive (already using vh, but this helps iOS)
      window.addEventListener('resize', function(){ /* layout auto-updates via CSS */ });
    });
  </script>
</body>
</html>
